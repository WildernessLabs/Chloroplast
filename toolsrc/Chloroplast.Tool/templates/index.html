<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Templating</title>
    <link href="/Chloroplast/assets/main.css?v=20250817144954" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="container">
            <h1><a href="/Chloroplast/">Chloroplast Docs</a></h1>
        </div>
    </header>

    <div class="container" style="margin-left:0; max-width:100%;">
    <div class="row">
        
<div id="leftnav">
            <ul class="nav">
                <li class="nav-item">
                    <a href="/Chloroplast/installing/" class="nav-link">Installing</a>
                </li>
                <li class="nav-item">
                    <a href="/Chloroplast/cli/" class="nav-link">Command Line</a>
                </li>
                <li class="nav-item">
                    <a href="/Chloroplast/templates/" class="nav-link">Templates</a>
                </li>
        </ul>

</div>
        <div class="main-content">
            <h2>Templating</h2>
            
            
            <p>Chloroplast templates are built using ASP.NET's Razor templates.</p>
<a name="Configuration"></a><h1>Configuration</h1>
<p>The <code>SiteConfig.yml</code> file lets you configure the location of templates and the folders to find content files to process.</p>
<pre><code class="language-yaml"># razor templates
templates_folder: templates

areas:
  - source_folder: /source
    output_folder: /
</code></pre>
<a name="Markdown_front_matter"></a><h1>Markdown front matter</h1>
<p>The template will be defined by the content's front matter.</p>
<pre><code>---
template: TemplateName
title: Document title
---
</code></pre>
<p>If this value is either incorrect, or omitted, it will default to look for a template named <code>Default.cshtml</code>. These templates are assumed to be just for the content area itself.</p>
<a name="SiteFrame_cshtml"></a><h1>SiteFrame.cshtml</h1>
<p>For the main site's chrome, Chloroplast will look for a template named <code>SiteFrame.cshtml</code> ... this will render</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;@Model.GetMeta(&quot;Title&quot;)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;maincontent&quot;&gt;
    @Raw(Model.Body)
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<a name="Customizing_Templates"></a><h1>Customizing Templates</h1>
<p>When designing custom templates for Chloroplast, focus on leveraging the available template methods and ensuring your templates handle the full range of Chloroplast features effectively.</p>
<a name="Template_Structure_Reference"></a><h2>Template Structure Reference</h2>
<p>For recommended template structure and patterns, refer to the included templates:</p>
<ul>
<li><strong>SiteFrame.cshtml</strong> - The main site chrome template that provides the overall page structure, navigation, and asset loading</li>
<li><strong>Default.cshtml</strong> - The default content template that demonstrates content area layout and metadata handling</li>
</ul>
<p>These templates serve as the de-facto recommended structure and demonstrate best practices for:</p>
<ul>
<li>Using <code>@Href()</code> for internal navigation links with BasePath handling</li>
<li>Using <code>@Asset()</code> for asset references with automatic cache busting</li>
<li>Handling content metadata with <code>@Model.GetMeta()</code></li>
<li>Rendering content with <code>@Raw(Model.Body)</code></li>
<li>Working with the <code>@Model.Headers</code> collection for table of contents</li>
</ul>
<a name="Template_Properties_and_Methods"></a><h1>Template Properties and Methods</h1>
<p>Available to all templates are the following functions:</p>
<ul>
<li><code>@Raw(&quot;&lt;some string&gt;&quot;)</code>
<ul>
<li>the <code>Raw</code> method will avoid HTML encoding content (which is the default).</li>
</ul>
</li>
<li><code>@Model.Body</code>
<ul>
<li>This is the main HTML content being rendered in this template. You should output this through the <code>Raw</code> method since it will likely contain HTML.</li>
</ul>
</li>
<li><code>@Model.GetMeta(&quot;title&quot;)</code>
<ul>
<li>with this you can access any value in the front matter (for example, <code>title</code>).</li>
</ul>
</li>
<li><code>@await PartialAsync(&quot;TemplateName&quot;, &quot;model value&quot;)</code>
<ul>
<li>This lets you render sub templates.</li>
<li>the template name parameter will match the razor fil.e name ... so in the example above, it would be looking for a file named <code>Templates/TemplateName.cshtml</code></li>
<li>the second parameter can be any kind of object really, whatever the template in question is expecting.</li>
</ul>
</li>
<li><code>@Model.Headers</code> collection
<ul>
<li>Each <code>h1</code>-<code>h6</code> will be parsed and added to this headers collection.</li>
<li>Every <code>Header</code> object has the following properties:
<ul>
<li>Level: the numeric value of the header</li>
<li>Value: the text</li>
<li>Slug: a slug version of the <code>Value</code>, which corresponds to an anchor added to the HTML before the header.</li>
</ul>
</li>
</ul>
</li>
<li><code>@await PartialAsync(&quot;Docs/area/menu.md&quot;)</code>
<ul>
<li>This overload of the <code>PartialAsync</code> method assumes you're rendering a markdown file.</li>
<li>The markdown file can define its own template (will default to <code>Default</code>), and will only render the contents of that specific template (ie. no <code>SiteFrame.cshtml</code>).</li>
</ul>
</li>
</ul>
<a name="URL_and_Asset_Methods"></a><h2>URL and Asset Methods</h2>
<p>For generating URLs and asset references in your templates:</p>
<ul>
<li><code>@Href(&quot;/path/to/page&quot;)</code>
<ul>
<li>Prefixes a site-relative URL with the configured BasePath</li>
<li>Use this for internal site navigation links</li>
<li>Example: <code>&lt;a href=&quot;@Href(&quot;/about&quot;)&quot;&gt;About&lt;/a&gt;</code></li>
</ul>
</li>
<li><code>@Asset(&quot;/path/to/asset.css&quot;)</code>
<ul>
<li>Builds an asset URL with BasePath and automatic cache-busting version</li>
<li>Combines both BasePath application and version parameter addition</li>
<li><strong>Important</strong>: Do not manually append query parameters to Asset() results, as this will conflict with the automatic version parameter</li>
<li>Example: <code>&lt;link href=&quot;@Asset(&quot;/css/main.css&quot;)&quot; rel=&quot;stylesheet&quot; /&gt;</code></li>
</ul>
</li>
</ul>
<a name="URL_Method_Examples"></a><h3>URL Method Examples</h3>
<pre><code class="language-html">&lt;!-- Navigation links using Href --&gt;
&lt;nav&gt;
    &lt;a href=&quot;@Href(&quot;/&quot;)&quot;&gt;Home&lt;/a&gt;
    &lt;a href=&quot;@Href(&quot;/docs&quot;)&quot;&gt;Documentation&lt;/a&gt;
    &lt;a href=&quot;@Href(&quot;/about&quot;)&quot;&gt;About&lt;/a&gt;
&lt;/nav&gt;

&lt;!-- Asset references using Asset (preferred for CSS/JS) --&gt;
&lt;link href=&quot;@Asset(&quot;/css/main.css&quot;)&quot; rel=&quot;stylesheet&quot; /&gt;
&lt;script src=&quot;@Asset(&quot;/js/app.js&quot;)&quot;&gt;&lt;/script&gt;

&lt;!-- Manual approach using Href + WithVersion for more control --&gt;
&lt;link href=&quot;@WithVersion(Href(&quot;/css/main.css&quot;))&quot; rel=&quot;stylesheet&quot; /&gt;
</code></pre>
<p><strong>⚠️ Cache Busting Conflict Warning</strong>: When using <code>Asset()</code>, do not manually append query parameters or call <code>WithVersion()</code> on the result, as <code>Asset()</code> already includes cache busting. This would result in malformed URLs like <code>/basePath/assets/script/samples?v=123/mysample.js</code>.</p>
<a name="Cache_Busting_Methods"></a><h2>Cache Busting Methods</h2>
<p>For managing asset versioning and cache invalidation:</p>
<ul>
<li><code>@WithVersion(&quot;/path/to/asset.css&quot;)</code>
<ul>
<li>Adds a version parameter to asset URLs for cache busting (e.g., <code>/path/to/asset.css?v=20231215123456</code>)</li>
<li>Only adds the version parameter when cache busting is enabled in configuration</li>
<li>Properly handles existing query parameters by using <code>&amp;</code> instead of <code>?</code> when appropriate</li>
</ul>
</li>
<li><code>@BuildVersion</code>
<ul>
<li>Gets the current build version string, or <code>null</code> if cache busting is disabled</li>
<li>Useful for displaying version information or custom cache busting logic</li>
</ul>
</li>
</ul>
<a name="Cache_Busting_Example"></a><h3>Cache Busting Example</h3>
<pre><code class="language-html">&lt;!-- Recommended approach using WithVersion --&gt;
&lt;link href=&quot;@WithVersion(&quot;/assets/main.css&quot;)&quot; rel=&quot;stylesheet&quot; /&gt;
&lt;script src=&quot;@WithVersion(&quot;/assets/site.js&quot;)&quot;&gt;&lt;/script&gt;

&lt;!-- Manual approach using BuildVersion --&gt;
@if (BuildVersion != null)
{
    &lt;link href=&quot;/assets/main.css?v=@BuildVersion&quot; rel=&quot;stylesheet&quot; /&gt;
}
else
{
    &lt;link href=&quot;/assets/main.css&quot; rel=&quot;stylesheet&quot; /&gt;
}
</code></pre>

        </div>
    </div>
</div>

    <footer>
        <div class="container">
            <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                <li class="nav-item"><a href="/Chloroplast/" class="nav-link text-muted">Home</a></li>
                <li class="nav-item"><a href="https://github.com/WildernessLabs/Chloroplast" class="nav-link text-muted">GitHub</a></li>
                <li class="nav-item"><a href="https://www.wildernesslabs.co/" class="nav-link text-muted">Wilderness Labs</a></li>
                <li class="nav-item"><a href="https://community.wildernesslabs.co/" class="nav-link text-muted">Community</a></li>
                <li class="nav-item"><a href="https://blog.wildernesslabs.co/" class="nav-link text-muted">Blog</a></li>
            </ul>
            <p class="text-center text-muted">Made with ♥ at <a href="https://wildernesslabs.co">wildernesslabs.co</a></p>
        </div>
    </footer>
</body>
</html>
