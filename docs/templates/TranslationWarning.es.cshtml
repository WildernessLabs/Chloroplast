@using System.Linq
@using Chloroplast.Core
@{
    var currentLocale = Model?.Node?.Locale ?? "en";
    var defaultLocale = "en"; // We can't access SiteConfig from partial templates
    var hasTranslation = false;
    if (Model?.Node?.Translations != null)
    {
        foreach (var translation in Model.Node.Translations)
        {
            if (translation.Locale == currentLocale)
            {
                hasTranslation = true;
                break;
            }
        }
    }
    var isMachineTranslated = Model?.Node?.IsMachineTranslated ?? false;
    
    // Simple display name lookup for the basic supported locales
    string GetDisplayName(string locale) => locale?.ToLower() switch
    {
        "en" => "English",
        "es" => "Espa침ol",
        _ => locale?.ToUpper() ?? "Unknown"
    };
}

@if (!hasTranslation && currentLocale != defaultLocale)
{
    <div class="translation-warning" role="alert">
        <strong>丘멆잺 Aviso de Traducci칩n:</strong> 
        Este contenido no est치 disponible en @GetDisplayName(currentLocale). 
        Est치s viendo la versi칩n en @GetDisplayName(defaultLocale).
    </div>
}

@if (isMachineTranslated)
{
    <div class="machine-translation-warning" role="alert">
        <strong>游뱄 Traducci칩n Autom치tica:</strong> 
        Este contenido fue traducido autom치ticamente y puede contener errores.
    </div>
}