@inherits Chloroplast.Core.Rendering.ChloroplastTemplateBase<Chloroplast.Core.Rendering.RenderedContent>
@using Chloroplast.Core
<div class="container" style="margin-left:0; max-width:100%;">
    <div class="row">
        @{
            var baseMenu = "source/menu.md";
            var localizedMenu = CurrentLocale != SiteConfig.DefaultLocale ? $"source/menu.{CurrentLocale}.md" : baseMenu;
            // Try localized first; PartialAsync will throw if missing, so check file existence
            var rootPath = SiteConfig.Instance["root"];
            var localizedMenuFull = System.IO.Path.Combine(rootPath, localizedMenu.Replace("/", System.IO.Path.DirectorySeparatorChar.ToString()));
            var menuPathToUse = System.IO.File.Exists(localizedMenuFull) ? localizedMenu : baseMenu;
        }
        @await PartialAsync(menuPathToUse)
        <div class="main-content">
            <h2>@Model.GetMeta("title")</h2>
            @if (@Model.HasMeta("subtitle"))
            {
                <h3>@Model.GetMeta("subtitle")</h3>
            }
            
            @if (IsMachineTranslated)
            {
                <div class="machine-translation-warning" role="alert" style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 0.75rem; margin-bottom: 1rem; border-radius: 0.25rem;">
                    <strong>🤖 Machine Translation:</strong> 
                    This content was automatically translated and may contain errors.
                </div>
            }
            
            @Raw(Model.Body)
        </div>
    </div>
</div>